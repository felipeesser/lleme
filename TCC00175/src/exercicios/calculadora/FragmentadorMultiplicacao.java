package exercicios.calculadora;

import java.util.Scanner;
import exercicios.calculadora.RepresentacaoExpressao;
import exercicios.calculadora.Multiplicacao;

public class FragmentadorMultiplicacao extends FragmentadorDeExpressao {

  public String extrairSimbolo(String expressaoStr) throws Exception {
    if (expressaoStr == null)
      return null;
    Scanner in = new Scanner(expressaoStr.trim());
    RepresentacaoExpressao op1;
    RepresentacaoExpressao op2;
    if (in.hasNext("\\*")) {
      in.next("\\*");
      if (getPilha().size() >= 2) {
        op2 = getPilha().pop();
        op1 = getPilha().pop();
        getPilha().add(new Multiplicacao(op1, op2));
        if (in.hasNextLine()) {
          String resto = in.nextLine().trim();
          if (resto.equals(""))
            return null;
          else
            return resto;
        } else
          return null;
      } else
        throw new Exception("Número inválido de operandos para a operação de multiplicacao") {
        };
    } else if (proximo != null)
      return proximo.extrairSimbolo(expressaoStr);
    else
      return expressaoStr;
  }
}
